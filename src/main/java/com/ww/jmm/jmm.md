# Java内存模型

JMM关键技术点都是围绕着多线程的原子性、可见性和有序性建立的；

* 原子性

* 可见性

* 有序性

  有序性问题的原因是因为程序在执行时，可能会进行指令重排，重排后的指令与原指令的顺序未必一致。

  之所以需要做指令重排，就是**为了尽量少的中断流水线，提高性能**

## Happen-Before规则

不允许指令重排

* 程序顺序原则：一个线程内保证语义的串行性；
* volatile规则：volatile变量的写，先发生于读，这保证了volatile变量的可见性；
* 锁规则：解锁（unlock）必然发生在随后的加锁（lock）前；
* 传递性：A先于B，B先于C，那么A必然先于C；
* 线程的start()方法先于它的每一个动作；
* 线程的所有操作先于线程的终结（Thread.join()）；
* 线程的中断（interrupt()）先于被中断线程的代码；
* 对象的构造方法执行、结束先于finalize()方法；